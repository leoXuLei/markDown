# 布尔运算符

## 概述

- **作用：** 布尔运算符用于将表达式转为布尔值。
- **分类：** 一共包含四个运算符。
  - 取反运算符：`!`
  - 且运算符：`&&`
  - 或运算符：`||`
  - 三元运算符：`?:`

## 取反运算符（!）

- **作用：** 取反运算符是一个感叹号，用于将布尔值变为相反值，即`true`变成`false`，`false`变成`true`。

```javascript
!true; // false
!false; // true
```

- **规则：**

  - 对于非布尔值，取反运算符会将其转为布尔值。可以这样记忆，以下六个值取反后为`true`，其他值都为`false`。

    - `undefined`
    - `null`
    - `false`
    - `0`
    - `NaN`
    - 空字符串（`''`）

  - 如果对一个值连续做两次取反运算，等于将其转为对应的布尔值，与`Boolean`函数的作用相同。这是一种常用的类型转换的简便写法。

```javascript
// 【1】
!undefined; // true
!null; // true
!0; // true
!NaN; // true
!""; // true

!54; // false
!"hello"; // false
![]; // false
!{}; // false

// 【2】
!!x;
// 等同于
Boolean(x);
```

## 且运算符（&&）

- **作用：** 且运算符（`&&`）往往用于多个表达式的求值。
  - 假设我们想要返回两个或多个选项中的一个，**使用`&&`可以返回第一个 false。如果所有操作数的值都是 true，将返回最后一个表达式的值**。
- **规则：**
  - 如果第一个运算子的布尔值为`true`，则返回第二个运算子的值（注意是值，不是布尔值）；
  - 如果第一个运算子的布尔值为`false`，则直接返回第一个运算子的值，且不再对第二个运算子求值。

```javascript
"t" && ""; // ""
"t" && "f"; // "f"
"t" && 1 + 2; // 3
"" && "f"; // ""
"" && ""; // ""

var x = 1;
1 - 1 && (x += 1); // 0
x; // 1

let a=1，b=2，c=3;
console.log(a&&b&&c) //3
console.log(null&&0)//null
```

- **应用：**
  - 这种跳过第二个运算子的机制，被称为“短路”。有些程序员喜欢用它取代`if`结构，比如下面是一段`if`结构的代码，就可以用且运算符改写。
  - 且运算符可以多个连用，这时返回第一个布尔值为`false`的表达式的值。如果所有表达式的布尔值都为`true`，则返回最后一个表达式的值。

```javascript
// 【1】
if (i) {
  doSomething();
}

// 等价于

i && doSomething();
// 上面代码的两种写法是等价的，但是后一种不容易看出目的，也不容易除错，建议谨慎使用。

// 【2】
true && "foo" && "" && 4 && "foo" && true;
// ''

1 && 2 && 3;
// 3
```

## 或运算符（||）

- **作用：** 或运算符（`||`）也用于多个表达式的求值。
  - 假设我们想要返回两个或多个选项中的一个，使用`||`可以返回第一个 true。如果所有操作数的值都是 false，将返回最后一个表达式
- **规则：**
  - 如果第一个运算子的布尔值为`true`，则返回第一个运算子的值，且不再对第二个运算子求值；
  - 如果第一个运算子的布尔值为`false`，则返回第二个运算子的值。

```javascript
"t" || ""; // "t"
"t" || "f"; // "t"
"" || "f"; // "f"
"" || ""; // ""

leta=1，b=2，c=3;
console.log(abc) // 1
console.log(null || 0) // 0
```

- **应用：**
  - 短路规则对这个运算符也适用。这种只通过第一个表达式的值，控制是否运行第二个表达式的机制，就称为“短路”（short-cut）。
  - 或运算符可以多个连用，这时返回第一个布尔值为`true`的表达式的值。如果所有表达式都为`false`，则返回最后一个表达式的值。
  - 或运算符常用于为一个变量设置默认值。

```javascript
// 【1】
var x = 1;
true || (x = 2); // true
x; // 1

// 【2】
false || 0 || "" || 4 || "foo" || true;
// 4

false || 0 || "";
// ''

// 【3】
function saveText(text) {
  text = text || "";
  // ...
}

// 或者写成
saveText(this.text || "");

// 上面代码表示，如果函数调用时，没有提供参数，则该参数默认设置为空字符串。
```

## 三元条件运算符（?:）

- **定义：** 三元条件运算符由问号（?）和冒号（:）组成，分隔三个表达式。它是 JavaScript 语言唯一一个需要三个运算子的运算符。

- **规则：**
  - 如果第一个表达式的布尔值为`true`，则返回第二个表达式的值，否则返回第三个表达式的值。
  - 通常来说，三元条件表达式与`if...else`语句具有同样表达效果，前者可以表达的，后者也能表达。但是两者具有一个重大差别，**`if...else`是语句，没有返回值；三元条件表达式是表达式，具有返回值**。所以，在需要返回值的场合，只能使用三元条件表达式，而不能使用`if..else`。

```javascript
// 【1】
"t" ? "hello" : "world"; // "hello"
0 ? "hello" : "world"; // "world"

// 【2】
console.log(true ? "T" : "F");
// 上面代码中，`console.log`方法的参数必须是一个表达式，这时就只能使用三元条件表达式。如果要用`if...else`语句，就必须改变整个代码写法了。
```
